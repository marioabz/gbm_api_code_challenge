
version: "3.8"
services:

  web:
    image: "mariobd7/gbm_code_challenge"
    ports:
      - "80:80"

  datadog:
    links:
      - web
    image: "datadog/agent:latest"
    environment:
      - DD_API_KEY=75f1741aa9e7c2edf9f73c430a79d668
      - DD_LOGS_ENABLED=true
      - DD_LOGS_CONFIG_CONTAINER_COLLECT_ALL=true
      - DD_CONTAINER_EXCLUDE='name:datadog-agent'
    volumes:
      - /var/run/docker.sock:/var/run/docker.sock:ro
      - /proc/:/host/proc/:ro
      - /opt/datadog-agent/run:/opt/datadog-agent/run:rw
      - /cgroup/:/host/sys/fs/cgroup:ro

    depends_on:
      - web
